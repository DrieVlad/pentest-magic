# 802.1x

Смотреть нужно в сторону моста

Легаси

{% embed url="https://github.com/Orange-Cyberdefense/fenrir-ocd" %}

Более актуальная версия

{% embed url="https://github.com/scipag/nac_bypass" %}

Чтобы все заработало надо использовать примерно следующую схему:

```bash
sudo bash nac_bypass_setup.sh -1 eth1 -2 eth0
```

После выполнения команды делаем следующие действия:

В eth0 вставляем устройство, которое умеет проходить аутентификацию (принтер, рабочую станцию). В eth1 вставляем кабель, который подключен к внутренней сети.

<mark style="color:red;">Вторая часть скрипта NAC Bypass работает не стабильно, поэтому лучше сделать руками.</mark>

Предварительно нужно узнать MAC устройства, которое умеет проходить аутентификацию, его IP, а также IP шлюза. После этого заготовить oneliner

```bash
sudo maccganger -m <mac> br0; sudo bash ifconfig br0 <IP>/<mask>; sudo ip route add default via <IP>;
```

А также открываем wireshark на интерфейсе br0 и применяем фильтр **EAP.**  Как только видим в трафике заветное **SUCCESS,** отключаем устройство (принтер) от сети и применяем команду заготовленную ранее.

После этого пробуем взаимодействовать с сетью.

Если сеть пропала, повторяем весь алгоритм заново.



